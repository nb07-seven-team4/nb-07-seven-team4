### REST Clientë¥¼ ì‚¬ìš©í•œ API í…ŒìŠ¤íŠ¸ íŒŒì¼
### VSCodeì˜ REST Client í™•ì¥ì„ ì„¤ì¹˜í•˜ë©´ ì´ íŒŒì¼ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤
# ì„¤ì¹˜í›„ ê»ë‹¤ í‚¤ë©´ getê°™ì€ ì½”ë“œìœ„ì— send requestë³´ì´ëŠ”ë°ì´ê±°ëˆ„ë¥´ë©´ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
# expressê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœì—ì„œ ë°‘ì˜ í¬íŠ¸ë„ í™•ì¸í•˜ê³  ë‚˜ì„œ í•˜ë©´ ë©ë‹ˆë‹¤

# ============================================
# ë³€ìˆ˜ ì„¤ì • (í…ŒìŠ¤íŠ¸í•  ê°’ìœ¼ë¡œ ìˆ˜ì •í•˜ì„¸ìš”)
# ============================================
@baseUrl = http://localhost:3000
@groupId = 1
@recordId = 1
@filename = ì—…ë¡œë“œí›„-ë°›ì€-íŒŒì¼ëª….jpg

###############################################
# 1. Health Check
###############################################

### 1-1. ì„œë²„ ìƒíƒœ í™•ì¸
GET {{baseUrl}}/
Content-Type: application/json

###############################################
# 2. Rank ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (ë­í‚¹ ì¡°íšŒ)
###############################################

### 2-1. ê·¸ë£¹ ë­í‚¹ ì¡°íšŒ - ì •ìƒ ì¼€ì´ìŠ¤
# ì ìˆ˜ ê³„ì‚°: duration(ì´ˆ) + (distance(km) Ã— 15)
# ì˜ˆìƒ ê²°ê³¼: runner1(1ìœ„), runner2(2ìœ„), runner3(3ìœ„)
GET {{baseUrl}}/groups/{{groupId}}/rank
Content-Type: application/json


### . ê·¸ë£¹ 1ë²ˆ ë­í‚¹ ì¡°íšŒ -> ë§Œì•½ test-setup.jsë¥¼ ì‹¤í–‰í–ˆìœ¼ë©´ 404 not foundë¡œ ë‚˜ì˜´ -> seed.jsíŒŒì¼ ì˜í•´ì„œ
GET {{baseUrl}}/groups/1/rank
Content-Type: application/json

### 2-2. ê·¸ë£¹ 2ë²ˆ ë­í‚¹ ì¡°íšŒ
GET {{baseUrl}}/groups/2/rank
Content-Type: application/json

### 2-3. ê·¸ë£¹ 3ë²ˆ ë­í‚¹ ì¡°íšŒ
GET {{baseUrl}}/groups/3/rank
Content-Type: application/json



### 2-4 
GET {{baseUrl}}/groups/4/rank
Content-Type: application/json


### 2-4. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê·¸ë£¹ ë­í‚¹ ì¡°íšŒ (ì—ëŸ¬ ì¼€ì´ìŠ¤)
# ì˜ˆìƒ: 404 Not Found - "ê·¸ë£¹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
GET {{baseUrl}}/groups/9999/rank
Content-Type: application/json

### 2-5. ì˜ëª»ëœ ê·¸ë£¹ IDë¡œ ë­í‚¹ ì¡°íšŒ (ì—ëŸ¬ ì¼€ì´ìŠ¤)
# ì˜ˆìƒ: 400 Bad Request - "IDê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"
GET {{baseUrl}}/groups/abc/rank
Content-Type: application/json

###############################################
# 3. Image ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
###############################################

### 3-1. ì´ë¯¸ì§€ ì—…ë¡œë“œ - ì •ìƒ ì¼€ì´ìŠ¤ (JPG)
# ì£¼ì˜: ì‹¤ì œ ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤
POST {{baseUrl}}/images/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test-image.jpg"
Content-Type: image/jpeg

< ./test-image.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 3-2. ì´ë¯¸ì§€ ì—…ë¡œë“œ - PNG íŒŒì¼ //jpgì¼ ê²½ìš° ì´ë¯¸ì§€ í™•ì¸ ë¶ˆê°€ëŠ¥
POST {{baseUrl}}/images/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="test-image.png"
Content-Type: image/png

< ./test-image.png
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 3-3. ì´ë¯¸ì§€ ì—…ë¡œë“œ - íŒŒì¼ ì—†ì´ ìš”ì²­ (ì—ëŸ¬ ì¼€ì´ìŠ¤)
# ì˜ˆìƒ: 400 Bad Request - "ì´ë¯¸ì§€ íŒŒì¼ì´ í•„ìš”í•©ë‹ˆë‹¤"
POST {{baseUrl}}/images/upload
Content-Type: application/json

### 3-4. íŠ¹ì • ë ˆì½”ë“œì˜ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ - Record 1
# ì°¸ê³ : Recordì— ì´ë¯¸ì§€ê°€ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤
GET {{baseUrl}}/images/records/{{recordId}}/images
Content-Type: application/json

### 3-5. Record 2ì˜ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ
GET {{baseUrl}}/images/records/2/images
Content-Type: application/json

### 3-6. Record 3ì˜ ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ
GET {{baseUrl}}/images/records/3/images
Content-Type: application/json

### 3-7. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë ˆì½”ë“œì˜ ì´ë¯¸ì§€ ì¡°íšŒ (ì—ëŸ¬ ì¼€ì´ìŠ¤)
# ì˜ˆìƒ: 404 Not Found - "ìš´ë™ ê¸°ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
GET {{baseUrl}}/images/records/9999/images
Content-Type: application/json

### 3-8. ì˜ëª»ëœ ë ˆì½”ë“œ IDë¡œ ì´ë¯¸ì§€ ì¡°íšŒ (ì—ëŸ¬ ì¼€ì´ìŠ¤) // cannot convert abc to a bigint
GET {{baseUrl}}/images/records/abc/images
Content-Type: application/json

### 3-9. ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì— ì§ì ‘ ì ‘ê·¼
# ë¸Œë¼ìš°ì €ì—ì„œë„ ì´ URLë¡œ ì´ë¯¸ì§€ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
# uploadsì— ìƒì„±ëœ ì „ì²´ íŒŒì¼ëª…ì„ uploadsë’¤ì— ì‘ì„±
GET {{baseUrl}}/uploads/de207a31-ab06-4e06-b53d-a5c98d38c2dd.jpg

### 3-10. ì´ë¯¸ì§€ ì‚­ì œ - ì •ìƒ ì¼€ì´ìŠ¤
# ì£¼ì˜: @filenameì„ ì‹¤ì œ ì—…ë¡œë“œëœ íŒŒì¼ëª…ìœ¼ë¡œ ë³€ê²½í•˜ì„¸ìš”
DELETE {{baseUrl}}/images/0d8751b3-62b5-4cfa-9d35-44201fa2a813.png
Content-Type: application/json

### 3-11. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ì‚­ì œ (ì—ëŸ¬ ì¼€ì´ìŠ¤)
# ì˜ˆìƒ: 404 Not Found - "ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
DELETE {{baseUrl}}/images/nonexistent-file.jpg
Content-Type: application/json

###############################################
# 4. 404 ë° ì—ëŸ¬ í…ŒìŠ¤íŠ¸
###############################################

### 4-1. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì—”ë“œí¬ì¸íŠ¸
# ì˜ˆìƒ: 404 Not Found
GET {{baseUrl}}/nonexistent-endpoint
Content-Type: application/json

### 4-2. ì˜ëª»ëœ HTTP ë©”ì„œë“œ
# ì˜ˆìƒ: 404 Not Found
PUT {{baseUrl}}/
Content-Type: application/json

###############################################
# 5. í†µí•© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
###############################################

### ì‹œë‚˜ë¦¬ì˜¤ A: ì´ë¯¸ì§€ ì „ì²´ í”Œë¡œìš°
# Step 1: ì´ë¯¸ì§€ ì—…ë¡œë“œ
POST {{baseUrl}}/images/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="flow-test.jpg"
Content-Type: image/jpeg

< ./test-image.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

# Step 2: ì‘ë‹µì—ì„œ filename ë³µì‚¬ í›„ @filename ë³€ìˆ˜ì— ë¶™ì—¬ë„£ê¸°
# Step 3: ì—…ë¡œë“œëœ íŒŒì¼ í™•ì¸
# GET {{baseUrl}}/uploads/{{filename}}
# Step 4: íŒŒì¼ ì‚­ì œ
# DELETE {{baseUrl}}/images/{{filename}}

### ì‹œë‚˜ë¦¬ì˜¤ B: ì—¬ëŸ¬ ê·¸ë£¹ ë­í‚¹ ë¹„êµ
# ìœ„ì—ì„œ ì„¤ëª… groupsëŠ” test-setup.jsì‹¤í–‰í–‡ì„ê²½ìš° ì•ˆëœ¸
GET {{baseUrl}}/groups/1/rank

###
GET {{baseUrl}}/groups/2/rank

###
GET {{baseUrl}}/groups/3/rank

###
GET {{baseUrl}}/groups/4/rank

###############################################
# 6. í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
###############################################

# ğŸ“ ì¶”ì²œ í…ŒìŠ¤íŠ¸ ìˆœì„œ:
# 1. Health Check (1-1) - ì„œë²„ í™•ì¸
# 2. ê·¸ë£¹ ë­í‚¹ ì¡°íšŒ (2-1) - ì •ìƒ ë™ì‘ í™•ì¸
# 3. ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ (2-4, 2-5) - ì˜ˆì™¸ ì²˜ë¦¬ í™•ì¸
# 4. ì´ë¯¸ì§€ ì—…ë¡œë“œ (3-1) - íŒŒì¼ ì—…ë¡œë“œ í™•ì¸
# 5. ì—…ë¡œë“œëœ íŒŒì¼ í™•ì¸ (3-9)
# 6. ë ˆì½”ë“œ ì´ë¯¸ì§€ ì¡°íšŒ (3-4)
# 7. ì´ë¯¸ì§€ ì‚­ì œ (3-10)

# ğŸ’¡ ìœ ìš©í•œ íŒ:
# - ì´ë¯¸ì§€ ì—…ë¡œë“œ í›„ ì‘ë‹µì˜ "filename"ì„ @filename ë³€ìˆ˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”
# - test-setup.jsë¥¼ ë¨¼ì € ì‹¤í–‰í•˜ì—¬ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì„¸ìš”
# - ê° ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ì„œ ì‘ë‹µì„ í™•ì¸í•˜ì„¸ìš”

# ğŸ”§ ë¬¸ì œ í•´ê²°:
# - "ENOENT" ì—ëŸ¬: test-image.jpg íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤
# - "Connection refused": node src/app.jsë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”
# - ì´ë¯¸ì§€ ëª©ë¡ì´ ë¹ˆ ë°°ì—´: Recordì— ì´ë¯¸ì§€ê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤
